{"version":3,"file":"mongo.js","sourceRoot":"","sources":["../../src/databases/mongo.ts"],"names":[],"mappings":";;;;;;;;;;AAOA,SAAsB,oBAAoB,CAAC,IAAiC;;QAE1E,MAAM,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC;QAEpB,MAAM,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAElD,OAAO;YACL,UAAU,EAAE,CAAO,IAAI,EAAE,EAAE;gBACzB,MAAM,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACnC,CAAC,CAAA;YACD,eAAe,EAAE,CAAO,KAAK,EAAE,EAAE;gBAC/B,OAAO,UAAU,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;YACvC,CAAC,CAAA;YACD,YAAY,EAAE,CAAO,EAAE,EAAE,EAAE;gBACzB,OAAO,UAAU,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;YACzC,CAAC,CAAA;YACD,cAAc,EAAE,CAAO,EAAE,EAAE,MAAM,EAAE,EAAE;gBACnC,MAAM,UAAU,CAAC,SAAS,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE;oBACtC,IAAI,EAAE,MAAM;iBACb,CAAC,CAAC;YACL,CAAC,CAAA;YACD,iBAAiB,EAAE,CAAO,KAAK,EAAE,MAAM,EAAE,EAAE;gBACzC,MAAM,UAAU,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE;oBACpC,IAAI,EAAE,MAAM;iBACb,CAAC,CAAC;YACL,CAAC,CAAA;YACD,UAAU,EAAE,CAAO,KAAK,EAAE,EAAE;gBAC1B,MAAM,UAAU,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;YACxC,CAAC,CAAA;SACF,CAAC;IAEJ,CAAC;CAAA;AA/BD,oDA+BC","sourcesContent":["import {Db} from \"mongodb\";\n\ninterface EzAuthMongoDBAdapterOptions {\n  collection: string;\n  db: Db;\n}\n\nexport async function EzAuthMongoDBAdapter(opts: EzAuthMongoDBAdapterOptions): Promise<EzAuthDBAdapter> {\n\n  const { db } = opts;\n\n  const collection = db.collection(opts.collection);\n\n  return {\n    userInsert: async (user) => {\n      await collection.insertOne(user);\n    },\n    userFindByLogin: async (login) => {\n      return collection.findOne({ login });\n    },\n    userFindById: async (id) => {\n      return collection.findOne({ _id: id });\n    },\n    userUpdateById: async (id, update) => {\n      await collection.updateOne({ _id: id }, {\n        $set: update,\n      });\n    },\n    userUpdateByLogin: async (login, update) => {\n      await collection.updateOne({ login }, {\n        $set: update,\n      });\n    },\n    userRemove: async (login) => {\n      await collection.deleteOne({ login });\n    },\n  };\n\n}\n"]}